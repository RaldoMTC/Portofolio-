<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio Saya - Developer Keren</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; background: #f4f4f4; }
        header { text-align: center; background: #007bff; color: white; padding: 20px; }
        section { margin: 20px 0; padding: 15px; background: white; border-radius: 8px; }
        form { display: flex; flex-direction: column; }
        input, textarea { margin: 10px 0; padding: 10px; border: 1px solid #ddd; border-radius: 4px; }
        button { padding: 10px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #218838; }
        #status { margin-top: 10px; color: green; }
    </style>
</head>
<body>
    <header>
        <h1>Portfolio Saya</h1>
        <p>Developer Full-Stack | Jakarta, Indonesia</p>
    </header>
    
    <section id="about">
        <h2>Tentang Saya</h2>
        <p>Gue suka bikin web keren dan eksperimen tech. Skills: HTML, CSS, JS, Node.js. Kontak gue via form di bawah!</p>
    </section>
    
    <section id="skills">
        <h2>Skills</h2>
        <ul>
            <li>JavaScript (Advanced)</li>
            <li>React & Vue</li>
            <li>API Integration (Telegram & SendGrid)</li>
            <li>UI/UX Design</li>
        </ul>
    </section>
    
    <section id="contact">
        <h2>Contact Form</h2>
        <form id="contactForm">
            <input type="text" id="name" placeholder="Nama" required>
            <input type="email" id="email" placeholder="Email" required>
            <textarea id="message" placeholder="Pesan" required></textarea>
            <button type="submit">Submit</button>
        </form>
        <div id="status"></div>
    </section>

    <script>
        // Setup SendGrid
        const sendGridApiKey = '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'; // API Key lo
        const toEmail = 'akunbaruh210207@gmail.com'; // Tujuan email
        const fromEmail = 'raldoackerman@gmail.com'; // Sender

        // Setup Telegram (opsional, hapus kalau gak mau)
        const telegramToken = '7822471568:AAE89BHf7mxBx4kqhKNLyE7yP4IlMgi8wFE'; // Ganti kalau pake
        const telegramChatId = '7680606818'; // Ganti kalau pake

        document.getElementById('contactForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const message = document.getElementById('message').value;
            const data = `New Contact from Portfolio:\nName: ${name}\nEmail: ${email}\nMessage: ${message}`;

            let sentCount = 0;
            const total = telegramToken ? 2 : 1; // Hitung berapa yang dikirim

            // Kirim ke Email via SendGrid
            fetch('https://api.sendgrid.com/v3/mail/send', {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${sendGridApiKey}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    personalizations: [{
                        to: [{ email: toEmail }],
                        subject: 'New Contact Form Submission - Portfolio'
                    }],
                    from: { email: fromEmail, name: 'Portfolio Sender' },
                    content: [{ type: 'text/plain', value: data }]
                })
            })
            .then(response => {
                sentCount++;
                if (response.ok) {
                    checkComplete();
                } else {
                    throw new Error('SendGrid failed');
                }
            })
            .catch(error => {
                sentCount++;
                checkComplete();
            });

            // Kirim ke Telegram (kalau setup)
            if (telegramToken) {
                const telegramUrl = `https://api.telegram.org/bot${telegramToken}/sendMessage?chat_id=${telegramChatId}&text=${encodeURIComponent(data)}&parse_mode=HTML`;
                const xhr = new XMLHttpRequest();
                xhr.open('GET', telegramUrl, true);
                xhr.onreadystatechange = function() {
                    if (xhr.readyState === 4) {
                        sentCount++;
                        checkComplete();
                    }
                };
                xhr.send();
            } else {
                sentCount++; // Skip Telegram
                checkComplete();
            }

            function checkComplete() {
                if (sentCount >= total) {
                    if (sentCount === total) { // Asumsi sukses kalau gak error
                        document.getElementById('status').innerHTML = 'Pesan terkirim ke Email (dan Telegram kalau setup)! üëç';
                        document.getElementById('contactForm').reset();
                    } else {
                        document.getElementById('status').innerHTML = 'Error: Gagal kirim salah satu. Cek console.';
                        document.getElementById('status').style.color = 'red';
                    }
                }
            }
        });
    </script>
</body>
</html>
